/**********************************************************************************************************
*文件说明：matrix3.c
*实现功能：3维矩阵相关运算函数
*修改日期：
*修改作者：
*备注信息
**********************************************************************************************************/

#include "matrix3.h"



/**********************************************************************************************************
*函数原型: void Matrix3_Add(float* a,float* b,float* c)
*函数功能: 3维矩阵加法: c=a+b
*输入形参: 矩阵a 矩阵b 
*返回数据: 矩阵c
*修改日期：2018-10-31
*备注信息
**********************************************************************************************************/
void Matrix3_Add(float* a,float* b,float* c)
{
	uint8_t i,j;
	for (i=0; i<3; i++)
	{
		for (j=0; j<3; j++)
		{
			c[i*3+j] = a[i*3+j] + b[i*3+j];
		}
	}
}



/**********************************************************************************************************
*函数原型: void Matrix3_Sub(float* a,float* b,float* c)
*函数功能: 3维矩阵减法: c=a-b
*输入形参: 矩阵a 矩阵b 
*返回数据: 矩阵c
*修改日期：2018-10-31
*备注信息
**********************************************************************************************************/
void Matrix3_Sub(float* a,float* b,float* c)
{
	uint8_t i,j;
	for (i=0; i<3; i++)
	{
		for (j=0; j<3; j++)
		{
			c[i*3+j] = a[i*3+j] - b[i*3+j];
		}
	}
}


/**********************************************************************************************************
*函数原型: void Matrix3_Mul(float* a,float* b,float* c)
*函数功能: 3维矩阵乘法: c=a×b
*输入形参: 矩阵a 矩阵b 
*返回数据: 矩阵c
*修改日期：2018-10-31
*备注信息
**********************************************************************************************************/
void Matrix3_Mul(float* a,float* b,float* c)
{
    uint8_t i,j;
    for (i=0; i<3; i++)
    {
        for (j=0; j<3; j++)
        {
            c[i*3+j] = a[i*3+0] * b[0*3+j] + a[i*3+1] * b[1*3+j] + a[i*3+2] * b[2*3+j];
        }
    }
}



/**********************************************************************************************************
*函数原型: void Matrix3_Copy(float* a, float* b)
*函数功能: 3维矩阵复制： b=a
*输入形参: 矩阵a 
*返回数据: none
*修改日期：2018-10-31
*备注信息
**********************************************************************************************************/
void Matrix3_Copy(float* a, float* b)
{
    uint8_t i;
    for(i=0;i<9;i++)
    {
        b[i] = a[i];
    }
}


/**********************************************************************************************************
*函数原型: void Matrix3_Tran(float* a, float* b)
*函数功能: 3维矩阵求转置
*输入形参: 矩阵a 矩阵b 
*返回数据: none
*修改日期：2018-10-31
*备注信息
**********************************************************************************************************/
void Matrix3_Tran(float* a, float* b)
{
    b[0] = a[0];
    b[1] = a[3];
    b[2] = a[6];
    b[3] = a[1];
    b[4] = a[4];
    b[5] = a[7];
    b[6] = a[2];
    b[7] = a[5];
    b[8] = a[8];
}


/**********************************************************************************************************
*函数原型: void Matrix3_Det(float* a,float* b)
*函数功能: 3维矩阵求逆 b= aˉ1
*输入形参: 矩阵a 矩阵b 
*返回数据: none
*修改日期：2018-10-31
*备注信息
**********************************************************************************************************/
void Matrix3_Det(float* a,float* b)
{
    float det;

    det = a[0] * a[4] * a[8]
          + a[1] * a[5] * a[6]
          + a[2] * a[3] * a[7]
          - a[2] * a[4] * a[6]
          - a[5] * a[7] * a[0]
          - a[8] * a[1] * a[3];

    b[0] = (a[4] * a[8] - a[5] * a[7]) / det;
    b[1] = (a[2] * a[7] - a[1] * a[8]) / det;
    b[2] = (a[1] * a[7] - a[4] * a[6]) / det;

    b[3] = (a[5] * a[6] - a[3] * a[8]) / det;
    b[4] = (a[0] * a[8] - a[2] * a[6]) / det;
    b[5] = (a[2] * a[3] - a[0] * a[5]) / det;

    b[6] = (a[3] * a[7] - a[4] * a[6]) / det;
    b[7] = (a[1] * a[6] - a[0] * a[7]) / det;
    b[8] = (a[0] * a[4] - a[1] * a[3]) / det;
}



/***********************************************************************************************************
*                               NoneQuadrotor UAV file_end
***********************************************************************************************************/
